<Window x:Class="Hermes.Views.LoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:viewmodels="clr-namespace:Hermes.ViewModels"
        Title="Login - Sistema HERMES" 
        Height="400" Width="500"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize">
    
    <Window.DataContext>
        <viewmodels:LoginViewModel/>
    </Window.DataContext>
    
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </Window.Resources>
    
    <Grid Background="#F5F5F5">
        <Border Width="400" Height="320" Background="White" 
                CornerRadius="10" 
                Padding="40">
            <Border.Effect>
                <DropShadowEffect BlurRadius="20" ShadowDepth="0" Opacity="0.3"/>
            </Border.Effect>
            
            <StackPanel>
                <TextBlock Text="Sistema HERMES" 
                           FontSize="28" 
                           FontWeight="Bold"
                           HorizontalAlignment="Center"
                           Foreground="#2C3E50"
                           Margin="0,0,0,10"/>
                
                <TextBlock Text="Inicio de Sesion" 
                           FontSize="14" 
                           HorizontalAlignment="Center"
                           Foreground="#7F8C8D"
                           Margin="0,0,0,30"/>
                
                <!-- CI Empleado -->
                <TextBlock Text="CI de Empleado:" 
                           FontSize="12" 
                           Foreground="#34495E"
                           Margin="0,0,0,5"/>
                <TextBox Text="{Binding CiEmpleado, UpdateSourceTrigger=PropertyChanged}"
                         Height="35"
                         FontSize="14"
                         Padding="10,5"
                         Margin="0,0,0,15"/>
                
                <!-- Password -->
                <TextBlock Text="Contrasena:" 
                           FontSize="12" 
                           Foreground="#34495E"
                           Margin="0,0,0,5"/>
                <PasswordBox x:Name="PasswordBox"
                             Height="35"
                             FontSize="14"
                             Padding="10,5"
                             Margin="0,0,0,20"
                             PasswordChanged="PasswordBox_PasswordChanged"/>
                
                <!-- Mensaje de Error -->
                <TextBlock Text="{Binding MensajeError}"
                           Foreground="Red"
                           FontSize="11"
                           TextWrapping="Wrap"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,10"
                           MinHeight="20">
                    <TextBlock.Style>
                        <Style TargetType="TextBlock">
                            <Setter Property="Visibility" Value="Collapsed"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding MensajeError}" Value="">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding MensajeError, Converter={x:Null}}" Value="{x:Null}"/>
                                    </MultiDataTrigger.Conditions>
                                </MultiDataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
                
                <!-- Boton Login -->
                <Button Content="Iniciar Sesion"
                        Command="{Binding LoginCommand}"
                        Height="40"
                        Background="#3498DB"
                        Foreground="White"
                        FontSize="14"
                        FontWeight="SemiBold"
                        BorderThickness="0"
                        Cursor="Hand">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}"
                                                CornerRadius="5"
                                                Padding="{TemplateBinding Padding}">
                                            <ContentPresenter HorizontalAlignment="Center" 
                                                            VerticalAlignment="Center"/>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#2980B9"/>
                                </Trigger>
                                <DataTrigger Binding="{Binding IsLoading}" Value="True">
                                    <Setter Property="IsEnabled" Value="False"/>
                                    <Setter Property="Opacity" Value="0.6"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
                
                <!-- Loading Indicator -->
                <ProgressBar IsIndeterminate="True"
                             Height="4"
                             Margin="0,10,0,0"
                             Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
