<Window x:Class="Hermes.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:viewmodels="clr-namespace:Hermes.ViewModels"
        Title="Sistema HERMES - Panel Broker" 
        Height="700" Width="1200"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized">
    
    <Window.DataContext>
        <viewmodels:MainViewModel/>
    </Window.DataContext>

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </Window.Resources>

    <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="250"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <!-- Sidebar Menu con degradado vertical -->
            <Border Grid.Column="0" Padding="0,20">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Color="#1A1F2E" Offset="0"/>
                        <GradientStop Color="#2C3E50" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
                <StackPanel>
                    <!-- Logo y Título -->
                    <StackPanel Margin="15,0,15,20">
                        <TextBlock Text="🏢 HERMES"
                                   FontSize="32"
                                   FontWeight="Bold"
                                   Foreground="White"
                                   HorizontalAlignment="Center"
                                   Margin="0,0,0,8"/>
                        <TextBlock Text="Panel de Administración"
                                   FontSize="13"
                                   FontWeight="SemiBold"
                                   Foreground="#BDC3C7"
                                   HorizontalAlignment="Center"/>
                    </StackPanel>

                    <!-- Información del Usuario -->
                    <Border Background="#2C3E50"
                            CornerRadius="8"
                            Padding="15"
                            Margin="10,0,10,15">
                        <StackPanel>
                            <TextBlock Text="{Binding NombreUsuarioActual}"
                                       FontSize="16"
                                       FontWeight="Bold"
                                       Foreground="White"
                                       TextAlignment="Center"
                                       TextWrapping="Wrap"
                                       Margin="0,0,0,6"/>
                            <TextBlock FontSize="13"
                                       FontWeight="SemiBold"
                                       Foreground="#5DADE2"
                                       TextAlignment="Center">
                                <Run Text="("/><Run Text="{Binding RolUsuario, Mode=OneWay}"/><Run Text=")"/>
                            </TextBlock>
                        </StackPanel>
                    </Border>

                    <!-- Botón Cerrar Sesión -->
                    <Button Content="🚪 Cerrar Sesión"
                            Command="{Binding CerrarSesionCommand}"
                            Style="{StaticResource DangerButtonStyle}"
                            Padding="12,10"
                            Margin="10,0,10,20"
                            FontSize="14"
                            FontWeight="SemiBold"/>

                    <!-- Separador -->
                    <Separator Margin="10,0,10,15" Background="#34495E" Height="2"/>

                    <!-- Opciones de administración (solo Broker) -->
                    <Button Content="📊 Dashboard"
                            Command="{Binding MostrarDashboardCommand}"
                            Style="{StaticResource MenuButtonStyle}"
                            Margin="10,5"
                            FontSize="14"
                            FontWeight="SemiBold"
                            Visibility="{Binding EsAdministrador, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                    <Button Content="👥 Gestion de Empleados"
                            Command="{Binding MostrarGestionEmpleadosCommand}"
                            Style="{StaticResource MenuButtonStyle}"
                            Margin="10,5"
                            FontSize="14"
                            FontWeight="SemiBold"
                            Visibility="{Binding EsAdministrador, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                    <Button Content="✓ Gestion de Tareas"
                            Command="{Binding MostrarGestionTareasCommand}"
                            Style="{StaticResource MenuButtonStyle}"
                            Margin="10,5"
                            FontSize="14"
                            FontWeight="SemiBold"
                            Visibility="{Binding EsAdministrador, Converter={StaticResource BooleanToVisibilityConverter}}"/>

                    <!-- Separador para sección de Bandejas (visible solo si hay opciones arriba O si puede enviar tareas) -->
                    <Separator Margin="10,15" Background="#7F8C8D" Height="1"
                               Visibility="{Binding EsAdministrador, Converter={StaticResource BooleanToVisibilityConverter}}"/>

                    <TextBlock Text="BANDEJAS DE TAREAS"
                               Foreground="#95A5A6"
                               FontSize="12"
                               FontWeight="Bold"
                               Margin="15,5,15,10"
                               LetterSpacing="1"/>

                    <!-- Tareas Enviadas - solo para Broker, Secretaria y Abogada/Abogado -->
                    <Button Content="📤 Tareas Enviadas"
                            Command="{Binding MostrarBandejaTareasEnviadasCommand}"
                            Style="{StaticResource MenuButtonStyle}"
                            Margin="10,5"
                            FontSize="14"
                            FontWeight="SemiBold"
                            Visibility="{Binding PuedeEnviarTareas, Converter={StaticResource BooleanToVisibilityConverter}}"/>

                    <!-- Tareas Recibidas - para TODOS los roles -->
                    <Button Content="📥 Tareas Recibidas"
                            Command="{Binding MostrarBandejaTareasRecibidasCommand}"
                            Style="{StaticResource MenuButtonStyle}"
                            Margin="10,5"
                            FontSize="14"
                            FontWeight="SemiBold"/>

                    <!-- Separador (solo visible para administradores) -->
                    <Separator Margin="10,15" Background="#7F8C8D" Height="1"
                               Visibility="{Binding EsAdministrador, Converter={StaticResource BooleanToVisibilityConverter}}"/>

                    <!-- Opciones adicionales (solo Broker) -->
                    <Button Content="📋 Propiedades"
                            Style="{StaticResource MenuButtonStyle}"
                            Margin="10,5"
                            FontSize="14"
                            FontWeight="SemiBold"
                            Visibility="{Binding EsAdministrador, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                    <Button Content="🏠 Clientes"
                            Style="{StaticResource MenuButtonStyle}"
                            Margin="10,5"
                            FontSize="14"
                            FontWeight="SemiBold"
                            Visibility="{Binding EsAdministrador, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                    <Button Content="💼 Transacciones"
                            Style="{StaticResource MenuButtonStyle}"
                            Margin="10,5"
                            FontSize="14"
                            FontWeight="SemiBold"
                            Visibility="{Binding EsAdministrador, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                    <Button Content="📊 Reportes"
                            Style="{StaticResource MenuButtonStyle}"
                            Margin="10,5"
                            FontSize="14"
                            FontWeight="SemiBold"
                            Visibility="{Binding EsAdministrador, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                </StackPanel>
            </Border>
            
            <!-- Main Content Area con fondo azul muy claro -->
            <Border Grid.Column="1" Background="#ECF0F1">
                <ContentControl Content="{Binding CurrentView}"
                              Margin="20"/>
            </Border>
        </Grid>
    </Grid>
</Window>
